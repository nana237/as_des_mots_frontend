{"version":3,"file":"src_app_pages_auth_complete-info_complete-info_module_ts.js","mappings":"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","sources":["./src/app/pages/auth/complete-info/complete-info-routing.module.ts","./src/app/pages/auth/complete-info/complete-info.module.ts","./src/app/pages/auth/complete-info/complete-info.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { CompleteInfoPage } from './complete-info.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CompleteInfoPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class CompleteInfoPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { CompleteInfoPageRoutingModule } from './complete-info-routing.module';\r\n\r\nimport { CompleteInfoPage } from './complete-info.page';\r\nimport { FooterModule } from '../../../components/pl-part/footer/footer.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    CompleteInfoPageRoutingModule,\r\n    ReactiveFormsModule.withConfig({warnOnNgModelWithFormControl: 'never'}),\r\n    FooterModule\r\n  ],\r\n  declarations: [CompleteInfoPage]\r\n})\r\nexport class CompleteInfoPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { AuthService } from '../../../services/auth.service';\r\nimport { FeatureService } from '../../../services/feature.service';\r\nimport { Router } from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'app-complete-info',\r\n  templateUrl: './complete-info.page.html',\r\n  styleUrls: ['./complete-info.page.scss'],\r\n})\r\nexport class CompleteInfoPage implements OnInit {\r\n\r\n  userForm: FormGroup;\r\n  mydata;\r\n  account_id;\r\n  emptyName;\r\n  emptyOrganisation;\r\n  emptyLevel;\r\n  emptyGender;\r\n  emptyTown;\r\n\r\n  loading=false;\r\n\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private auth_: AuthService,\r\n    private feature_: FeatureService,\r\n    private router: Router\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    if(this.auth_.userdata){\r\n      if(this.auth_.userdata.pk){\r\n        this.account_id=this.auth_.userdata.pk\r\n      }else{\r\n        this.account_id='';\r\n      }\r\n    }else{\r\n      this.account_id='';\r\n    }\r\n    this.initForm()\r\n  }\r\n\r\n//   {\r\n//     \"access_token\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjUzOTk1ODMxLCJqdGkiOiI1MWI0MDBlMTVlNTE0NmM4YmUxYmYxMWY2ZDJlMWU5MSIsInVzZXJfaWQiOjJ9.Eh-syDWcfPE2lt3tR7AiLyJx16nFB6i9Ve1cV2SPmIo\",\r\n//     \"refresh_token\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0b2tlbl90eXBlIjoicmVmcmVzaCIsImV4cCI6MTY1NDYwMDMzMSwianRpIjoiY2ZiNTc1NTYyMWFiNGVmNGJiZWI4NTE2MDVmYjg0ODgiLCJ1c2VyX2lkIjoyfQ.6zFdjAqzaFABJVXoC5TnKRJ9OrqwbGZ-aPP3srCLF78\",\r\n//     \"user\": {\r\n//         \"pk\": 2,\r\n//         \"username\": \"test2\",\r\n//         \"email\": \"test@test.com\",\r\n//         \"first_name\": \"\",\r\n//         \"last_name\": \"\"\r\n//     }\r\n// }\r\n// {\r\n//   \"access_token\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjU0MDc2MDQ5LCJqdGkiOiJjY2U1NTcyZWZlMzE0OGRjOGUyYjI4NmYyMjMwOGNhNCIsInVzZXJfaWQiOjN9.Wkp-oEvt6mMHoFv2XVMQt1a2ec0XgYThpH5nmyaPoGc\",\r\n//   \"refresh_token\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0b2tlbl90eXBlIjoicmVmcmVzaCIsImV4cCI6MTY1NDY4MDU0OSwianRpIjoiMjM5NWY2YmVkMjk1NGVhYWJmMmQ2MGRmNzQwNWFmYTgiLCJ1c2VyX2lkIjozfQ.FGLWnE4fxiBaxinSvCEPwZfmZcbcWXJWFWusN-4xOWA\",\r\n//   \"user\": {\r\n//       \"pk\": 3,\r\n//       \"username\": \"test\",\r\n//       \"email\": \"test@test.test\",\r\n//       \"first_name\": \"\",\r\n//       \"last_name\": \"\"\r\n//   }\r\n// }\r\n\r\n  initForm() {\r\n    this.userForm = this.formBuilder.group({\r\n      name: ['', Validators.required],\r\n      organization: [''],\r\n      level: ['', Validators.required],\r\n      genre: ['', Validators.required],\r\n      town: ['', Validators.required],\r\n      personType: ['ELEVE'],\r\n      account: [this.account_id],\r\n    });\r\n  }\r\n\r\n  validateForm(){\r\n    console.log('validate');\r\n    if (this.userForm.invalid) {\r\n      //- emptyName;\r\n      // emptyOrganisation;\r\n      //- emptyLevel;\r\n      // emptyGender;\r\n      // emptyTown;\r\n\r\n      if (this.userForm.get('name').value == '') { this.emptyName=true; } else { this.emptyName=false }\r\n      if (this.userForm.get('level').value=='') {  this.emptyLevel=true;  } else { this.emptyLevel=false }\r\n      if (this.userForm.get('genre').value==''){  this.emptyGender=true;  } else { this.emptyGender=false }\r\n      if (this.userForm.get('town').value==''){this.emptyTown=true; } else { this.emptyTown=false }\r\n\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  onSubmitForm(){\r\n\r\n    if (this.validateForm() && !this.loading) {\r\n      this.loading=true;\r\n      console.log(\"submit\");\r\n      console.log(this.userForm.value);\r\n  \r\n      console.log( this.userForm.get('name').value);\r\n       // let formValue= {\r\n    //   username: this.userForm.get('username').value,\r\n    //   email: this.userForm.get('email').value,\r\n    //   password1: this.userForm.get('password1').value,\r\n    //   password2: this.userForm.get('password2').value\r\n    // }\r\n\r\n    let formdata: FormData;\r\n    formdata= this.feature_.toFormdata(this.userForm.value);\r\n    // formdata= this.feature_.toFormdata(formValue);\r\n    // console.log(formdata.value)\r\n    console.log( formdata.get('username'))\r\n    formdata.forEach((fValue, fKey)=>{console.log(fValue, fKey)});\r\n\r\n    this.auth_.completeInfo(this.userForm.value).subscribe(\r\n      data=>{\r\n        console.log('inside subscribe');\r\n        console.log(data);\r\n        this.auth_.userCompleteData=data;\r\n        this.loading=false;\r\n        this.router.navigateByUrl('connexion');\r\n    },\r\n      error=>{\r\n        console.warn(error)\r\n        this.loading=false;\r\n      },\r\n      )\r\n    }else{\r\n\r\n      console.log(\"not submited\");\r\n      if (this.loading) {\r\n        console.log(this.loading);\r\n      }\r\n    }\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}