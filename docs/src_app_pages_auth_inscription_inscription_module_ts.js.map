{"version":3,"file":"src_app_pages_auth_inscription_inscription_module_ts.js","mappings":"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","sources":["./src/app/pages/auth/inscription/inscription-routing.module.ts","./src/app/pages/auth/inscription/inscription.module.ts","./src/app/pages/auth/inscription/inscription.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { InscriptionPage } from './inscription.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: InscriptionPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class InscriptionPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { InscriptionPageRoutingModule } from './inscription-routing.module';\r\n\r\nimport { InscriptionPage } from './inscription.page';\r\nimport { FooterModule } from '../../../components/pl-part/footer/footer.module';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    InscriptionPageRoutingModule,\r\n    ReactiveFormsModule.withConfig({warnOnNgModelWithFormControl: 'never'}),\r\n    FooterModule\r\n  ],\r\n  declarations: [InscriptionPage]\r\n})\r\nexport class InscriptionPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { AuthService } from '../../../services/auth.service';\r\nimport { FeatureService } from '../../../services/feature.service';\r\nimport { Router } from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'app-inscription',\r\n  templateUrl: './inscription.page.html',\r\n  styleUrls: ['./inscription.page.scss'],\r\n})\r\nexport class InscriptionPage implements OnInit {\r\n\r\n  userForm: FormGroup;\r\n  mydata;\r\n  \r\n  usernameAlreadyExist;\r\n  usernameEmpty;\r\n  otherusernameError;\r\n  emailEmpty;\r\n  emailAlreadyExist;\r\n  emailInvalid;\r\n  otherEmailError;\r\n  passwordEmpty;\r\n  passwordAndConfirmDiferent;\r\n  passwordWeak;\r\n  passwordToCommun;\r\n  otherPasswordError;\r\n  confirmEmpty;\r\n\r\n  loading=false;\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private auth_: AuthService,\r\n    private feature_: FeatureService,\r\n    private router: Router,\r\n\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.initForm()\r\n  }\r\n\r\n  initForm() {\r\n    this.userForm = this.formBuilder.group({\r\n      username: ['', Validators.required],\r\n      email: ['', [Validators.required, Validators.email]],\r\n      // datenaiss: ['', [Validators.required, Validators.min(0)]],\r\n      password1: ['', Validators.required],\r\n      password2:['', Validators.required ]\r\n    });\r\n\r\n  }\r\n\r\n  validateForm(){\r\n    let valid = false;\r\n    console.log('validate');\r\n    if (this.userForm.invalid) {\r\n      // this.usernameAlreadyExist;\r\n      //- this.usernameEmpty= this.userForm.get('username').invalid ? true:false;\r\n      //- this.emailEmpty;\r\n      // emailAlreadyExist;\r\n      //- this.emailInvalid;\r\n      //- this.passwordEmpty;\r\n      //- this.passwordAndConfirmDiferent;\r\n      //- this.passwordWeak;\r\n      // passwordToCommun;\r\n      //- this.confirmEmpty;\r\n\r\n      if (this.userForm.get('username').value == '') { this.usernameEmpty=true; } else { this.usernameEmpty=false }\r\n      if (this.userForm.get('email').value=='') {  this.emailEmpty=true;  } else { this.emailEmpty=false }\r\n      if (this.userForm.get('email').invalid && !this.emailEmpty) {  this.emailInvalid=true;  } else { this.emailInvalid=false }\r\n      if (this.userForm.get('password1').value==''){  this.passwordEmpty=true;  } else { this.passwordEmpty=false }\r\n      if (this.userForm.get('password2').value==''){this.confirmEmpty=true; } else { this.confirmEmpty=false }\r\n      if (!this.passwordEmpty && !this.confirmEmpty && this.userForm.get('password1').value!=this.userForm.get('password2').value){   this.passwordAndConfirmDiferent=true; } else { this.passwordAndConfirmDiferent=false }\r\n\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  onSubmitForm(){\r\n    console.log(\"submit\");\r\n    if(this.validateForm() && !this.loading){\r\n      this.loading=true;\r\n      console.log(this.userForm);\r\n      console.log(this.userForm.value);\r\n      console.log( this.userForm.get('username').value);\r\n  \r\n      let formValue= {\r\n        username: this.userForm.get('username').value,\r\n        email: this.userForm.get('email').value,\r\n        password1: this.userForm.get('password1').value,\r\n        password2: this.userForm.get('password2').value\r\n      }\r\n  \r\n      let formdata: FormData;\r\n      // formdata= this.feature_.toFormdata(this.userForm.value);\r\n      formdata= this.feature_.toFormdata(formValue);\r\n      // console.log(formdata.value)\r\n      console.log( formdata.get('username'))\r\n      formdata.forEach((fValue, fKey)=>{console.log(fValue, fKey)});\r\n  \r\n      this.auth_.register(formdata).subscribe(\r\n        data=>{\r\n          console.log(data);\r\n          this.mydata = data;\r\n          this.loading=false;\r\n          if(this.mydata.user){\r\n            this.auth_.userdata=this.mydata.user;\r\n            this.router.navigateByUrl('complete-info');\r\n          }\r\n        },\r\n        error=>{\r\n          this.loading=false;\r\n          console.warn(error);\r\n          if(error.error.password1.length>0){\r\n            let causeErrorFound=false;\r\n            if(error.error.password1[0]=='This password is too short. It must contain at least 8 characters.')\r\n            {\r\n              this.passwordWeak=true;\r\n              causeErrorFound=true;\r\n            }else{\r\n              this.passwordWeak=false;\r\n            }\r\n            if(error.error.password1[0]=='This password is too common.'){\r\n              this.passwordToCommun=true;\r\n              causeErrorFound=true;\r\n            }else{\r\n              this.passwordToCommun=false;\r\n            }\r\n\r\n            if(!causeErrorFound){\r\n              this.otherPasswordError=true;\r\n            }else{\r\n              this.otherPasswordError=false;\r\n            }\r\n          }else{\r\n            this.passwordWeak=false;\r\n            this.passwordToCommun=false;\r\n            this.otherPasswordError=false;\r\n          }\r\n\r\n          if (error.error.username.length>0) {\r\n            let causeErrorFound=false;\r\n            if(error.error.username[0]=='A user with that username already exists.')\r\n            {\r\n              this.usernameAlreadyExist=true;\r\n              causeErrorFound=true;\r\n            }else{\r\n              this.usernameAlreadyExist=false;\r\n            }\r\n\r\n\r\n            if(!causeErrorFound){\r\n              this.otherusernameError=true;\r\n            }else{\r\n              this.otherusernameError=false;\r\n            }\r\n          }else{\r\n            this.usernameAlreadyExist=false;\r\n            this.otherusernameError=false;\r\n          }\r\n\r\n          if (error.error.email.length>0) {\r\n            let causeErrorFound=false;\r\n            if(error.error.email[0]=='A user is already registered with this e-mail address.')\r\n            {\r\n              this.emailAlreadyExist=true;\r\n              causeErrorFound=true;\r\n            }else{\r\n              this.emailAlreadyExist=false;\r\n            }\r\n\r\n            if(!causeErrorFound){\r\n              this.otherEmailError=true;\r\n            }else{\r\n              this.otherEmailError=false;\r\n            }\r\n          }else{\r\n            this.emailAlreadyExist=false;\r\n            this.otherEmailError=false;\r\n          }\r\n       \r\n          // this.usernameAlreadyExist;\r\n          //  if (this.userForm.get('username').value == '') { this.usernameEmpty=true; } else { this.usernameEmpty=false }\r\n          // emailAlreadyExist;\r\n          // this.passwordWeak;\r\n\r\n        },\r\n        )\r\n    }else{\r\n      console.log(this.userForm);\r\n      console.log(this.userForm.value);\r\n      console.log( this.userForm.get('username').value);\r\n\r\n      console.log( this.userForm.get('username'));\r\n      console.log( this.userForm.controls.email.errors);\r\n\r\n    }\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}