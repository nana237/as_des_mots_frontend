{"version":3,"file":"src_app_pages_auth_connexion_connexion_module_ts.js","mappings":"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","sources":["./src/app/components/pl-part/header/header.component.ts","./src/app/components/pl-part/header/header.module.ts","./src/app/pages/auth/connexion/connexion-routing.module.ts","./src/app/pages/auth/connexion/connexion.module.ts","./src/app/pages/auth/connexion/connexion.page.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-header',\r\n  templateUrl: './header.component.html',\r\n  styleUrls: ['./header.component.scss'],\r\n})\r\nexport class HeaderComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {}\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { HeaderComponent} from './header.component';\r\n@NgModule({\r\n  declarations: [\r\n    HeaderComponent,\r\n  ],\r\n  exports: [\r\n    HeaderComponent,\r\n  ]\r\n})\r\nexport class HeaderModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ConnexionPage } from './connexion.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ConnexionPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ConnexionPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ConnexionPageRoutingModule } from './connexion-routing.module';\r\n\r\nimport { ConnexionPage } from './connexion.page';\r\nimport { FooterModule } from '../../../components/pl-part/footer/footer.module';\r\nimport { HeaderModule } from '../../../components/pl-part/header/header.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ConnexionPageRoutingModule,\r\n    ReactiveFormsModule.withConfig({warnOnNgModelWithFormControl: 'never'}),\r\n    FooterModule,\r\n    HeaderModule\r\n  ],\r\n  declarations: [ConnexionPage]\r\n})\r\nexport class ConnexionPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { AuthService } from '../../../services/auth.service';\r\nimport { FeatureService } from '../../../services/feature.service';\r\nimport { StorageService } from '../../../services/storage.service';\r\n\r\n@Component({\r\n  selector: 'app-connexion',\r\n  templateUrl: './connexion.page.html',\r\n  styleUrls: ['./connexion.page.scss'],\r\n})\r\nexport class ConnexionPage implements OnInit {\r\n\r\n  userForm: FormGroup\r\n  mydata;\r\n\r\n  emptyUserName;\r\n  emptyPassword;\r\n  invalidCredential;\r\n\r\n  loading=false;\r\n\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private auth_: AuthService,\r\n    private feature_: FeatureService,\r\n    private router: Router,\r\n    private storage_: StorageService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.initForm();\r\n  }\r\n\r\n  initForm(){\r\n    this.userForm = this.formBuilder.group({\r\n      username : ['', Validators.required],\r\n      password : ['', Validators.required]\r\n    });\r\n  }\r\n\r\n  validateForm(){\r\n    console.log('validate');\r\n    if (this.userForm.invalid) {\r\n\r\n      // emptyUserName;\r\n      // emptyPassword;\r\n      // invalidCredential;\r\n\r\n      if (this.userForm.get('username').value == '') { this.emptyUserName=true; } else { this.emptyUserName=false }\r\n      if (this.userForm.get('password').value=='') {  this.emptyPassword=true;  } else { this.emptyPassword=false }\r\n\r\n      return false;\r\n    }\r\n    this.emptyUserName=false\r\n    this.emptyPassword=false\r\n    return true;\r\n  }\r\n\r\n  onSubmitForm(){\r\n    if (this.validateForm() && !this.loading) {\r\n      this.loading=true;\r\n      this.auth_.login(this.userForm.value).subscribe(\r\n        data=>{\r\n          console.log(data);\r\n          this.mydata = data;\r\n          console.log('before');\r\n          console.log(this.auth_.userdata);\r\n          if(this.mydata.user){\r\n            this.auth_.userdata=this.mydata.user;\r\n            this.auth_.connected=true;\r\n            this.router.navigateByUrl('accueil');\r\n          }\r\n          this.loading=false;\r\n          console.log('after');\r\n          console.log(this.auth_.userdata);\r\n\r\n          this.storage_.store('userdata', data);\r\n          this.storage_.get('userdata').then(val=>{\r\n            console.log('receive promise');\r\n            console.log(val);\r\n          })\r\n        },\r\n        error=>{\r\n          console.warn(error)\r\n          this.loading=false;\r\n          this.invalidCredential=true;\r\n        },\r\n        )\r\n    }else{\r\n      console.log(\"invalide form \\n not submited\");\r\n\r\n    }\r\n\r\n  }\r\n\r\n\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}